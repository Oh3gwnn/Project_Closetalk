<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" >
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" >
  <title>Community</title>
  <link rel="stylesheet" href="/static/css/issue/article.css">
  <script src="http://code.jquery.com/jquery-3.4.1.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
</head>
<body>
<section class="ootd">
  <!-- header -->
  <header th:insert="~{header :: header}"></header>
  <div id="root">
    <div class="main_body">
      <div class="board_top">
        <div class="board_top_title">
          <p th:text="${issueArticle.title}">title</p>
        </div>
        <div class="board_top_info">
          <div class="board_top_userinfo">
<!--            <img th:src="@{${issueArticle.profile}}" th:if="${issueArticle!= null}">-->
            <p class="user_nickname" th:text="${issueArticle.nickname}">nickname</p>
          </div>
        </div>
      </div>
      <div class="board_image" th:each="image : ${issueArticle.issueImages}">
        <img th:src="@{${image.imageUrl}}" style="height: 100%; width: 100%">
      </div>
      <div class="board_middle">
        <div class="board_middle_boardinfo">
          <p th:text="${issueArticle.createdAt}">2023.08.28</p>
        </div>
        <div class="board_middle_btn">
          <div class="board_middle_btn_URL" id="copy-link"><i class="fa-solid fa-link"></i></div>
        </div>
        <div class="board_bottom_content"></div>
      </div>
      <div class="board_bottom">
        <div class="board_bottom_content">
          <div th:text="${issueArticle.content}">content</div>
        </div>
      </div>
    </div>
  </div>
  <footer th:insert="~{footer :: footer}"></footer>
  <!-- 배너 스와이프 API -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
  <script>
    var swiper = new Swiper(".mySwiper", {
      pagination: {
        el: ".swiper-pagination",
      },
    });
  </script>

  <!-- link 클릭 시 링크 복사하는 JS -->
  <script>
    document.getElementById('copy-link').addEventListener('click', function() {
      var link = window.location.href; // Get the current page's URL
      var tempInput = document.createElement("input");
      tempInput.value = link;
      document.body.appendChild(tempInput);
      tempInput.select();
      document.execCommand("copy");
      document.body.removeChild(tempInput);
      // Show a notification
      var notification = document.createElement("div");
      notification.textContent = "링크가 복사되었습니다!";
      notification.classList.add("copy-notification");
      document.body.appendChild(notification);
      setTimeout(function() {
        document.body.removeChild(notification);
      }, 3000);
    });
  </script>

<!--  <script>-->
<!--    // 댓글 작성 시 로그인 확인-->
<!--    var isAuthenticated = /* 사용자가 로그인 했는지 확인하는 로직 */;-->
<!--    const articleId = [[${articleId}]];-->
<!--    const accessToken = localStorage.getItem('accessToken');-->

<!--    document.addEventListener('DOMContentLoaded', function() {-->
<!--      const commentForm = document.getElementById('commentForm');-->
<!--      const commentSubmitBtn = document.querySelector('.comment_submit_btn');-->
<!--      let parentCommentId = null;-->

<!--      if (accessToken) {-->
<!--        const commentInput = document.querySelector('.comment_input');-->
<!--        if (commentInput) {-->
<!--          commentInput.placeholder = '댓글을 작성해주세요';-->
<!--        }-->

<!--        if (commentSubmitBtn) {-->
<!--          commentSubmitBtn.addEventListener('click', function(event) {-->
<!--            event.preventDefault();-->

<!--            const formData = new FormData(commentForm);-->
<!--            let endpoint = `/community/${articleId}`;-->

<!--            if (parentCommentId) {-->
<!--              const commentId = parentCommentId;-->
<!--              endpoint += `/${commentId}`;-->
<!--            }-->

<!--            fetch(endpoint, {-->
<!--              method: 'POST',-->
<!--              headers: {-->
<!--                'Authorization': 'Bearer ' + accessToken-->
<!--              },-->
<!--              body: formData-->
<!--            })-->
<!--                    .then(response => {-->
<!--                      if (response.ok) {-->
<!--                        alert('댓글이 등록되었습니다.');-->
<!--                        window.location.reload();-->
<!--                      } else {-->
<!--                        throw new Error('댓글 등록에 실패했습니다.');-->
<!--                      }-->
<!--                    })-->
<!--                    .catch(error => {-->
<!--                      alert(error.message); // Display an error message-->
<!--                      console.error('Error:', error);-->
<!--                      parentCommentId = null;-->
<!--                    });-->
<!--          });-->
<!--        }-->
<!--      }-->

<!--      var textarea = document.querySelector('.comment_input');-->
<!--      if (!isAuthenticated) {-->
<!--        textarea.placeholder = '로그인 후 댓글을 작성해주세요.';-->
<!--      }-->
<!--      const replyLinks = document.querySelectorAll('.comment_reply');-->
<!--      replyLinks.forEach(function(replyLink) {-->
<!--        replyLink.addEventListener('click', function(event) {-->
<!--          event.preventDefault(); // Prevent the link from navigating-->

<!--          parentCommentId = this.getAttribute('data-commentId');-->

<!--          const parentCommentNickname = this.closest('.commentList_item').querySelector('.user_nickname').textContent;-->
<!--          const commentInput = document.querySelector('.comment_input');-->
<!--          if (commentInput) {-->
<!--            commentInput.placeholder = `@${parentCommentNickname}에게 답글 작성하기`;-->
<!--          }-->

<!--          const parentCommentIdInput = document.getElementById('parentCommentId');-->
<!--          if (parentCommentIdInput) {-->
<!--            parentCommentIdInput.value = '';-->
<!--          }-->
<!--        });-->
<!--      });-->
<!--    });-->
<!--  </script>-->

<!--  <script>-->
<!--    // 삭제창 누르면 나오는 확인창-->
<!--    function confirmDelete() {-->
<!--      var result = confirm("이 글을 삭제하시겠습니까?");-->
<!--      if (result) {-->
<!--        var articleId = /*[[${articleId}]]*/;-->
<!--        $.ajax({-->
<!--          type: "DELETE",-->
<!--          url: "/ootd/" + articleId,-->
<!--          success: function(response) {-->
<!--            alert("성공적으로 삭제했습니다.");-->

<!--          },-->
<!--          error: function(xhr, status, error) {-->
<!--            alert("Error deleting article: " + error);-->
<!--            document.addEventListener('DOMContentLoaded', function() {-->
<!--              const deleteButtons = document.querySelectorAll('.comment_delete');-->
<!--              deleteButtons.forEach(function(deleteButton) {-->
<!--                deleteButton.addEventListener('click', function() {-->
<!--                  const commentId = this.getAttribute('data-commentId');-->

<!--                  // Show a confirmation dialog-->
<!--                  if (confirm('정말로 이 댓글을 삭제하시겠습니까?')) {-->
<!--                    // User confirmed deletion, send a request to delete the comment-->
<!--                    fetch(`/community/${articleId}/${commentId}/delete`, {-->
<!--                      method: 'POST', // Use POST instead of DELETE-->
<!--                      headers: {-->
<!--                        'Authorization': 'Bearer ' + accessToken-->
<!--                      }-->
<!--                    })-->
<!--                            .then(response => {-->
<!--                              if (response.ok) {-->
<!--                                alert('댓글이 삭제되었습니다.');-->
<!--                                window.location.reload(); // Refresh the page after deletion-->
<!--                              } else {-->
<!--                                throw new Error('댓글 삭제에 실패했습니다.');-->
<!--                              }-->
<!--                            })-->
<!--                            .catch(error => {-->
<!--                              alert(error.message); // Display an error message-->
<!--                              console.error('Error:', error);-->
<!--                            });-->
<!--                  }-->
<!--                });-->
<!--              } else {-->

<!--              }-->
<!--            }-->
<!--          });-->
<!--      });-->
<!--  </script>-->


  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
</section>
</body>
</html>